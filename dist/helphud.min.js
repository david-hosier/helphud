/*! helphud 18-10-2013 */
!function(a,b){var c=function(){var a,b;1==arguments.length?(b=arguments[0],b instanceof c?(this.left=b.left,this.top=b.top,this.width=b.width,this.height=b.height):(a=b.offset(),this.left=a.left,this.top=a.top,this.width=b.outerWidth(),this.height=b.outerHeight())):4==arguments.length&&(this.left=arguments[0],this.top=arguments[1],this.width=arguments[2],this.height=arguments[3])};c.prototype.explode=function(a){return this.left-=a,this.top-=a,this.width+=2*a,this.height+=2*a,this},c.prototype.intersection=function(a){var b=this,d=a,e=Math.max(b.left,d.left),f=Math.min(b.left+b.width,d.left+d.width);if(f>=e){var g=Math.max(b.top,d.top),h=Math.min(b.top+b.height,d.top+d.height);if(h>=g)return new c(e,g,f-e,h-g)}return null},c.prototype.subtract=function(a){var b,d=this,e=a;if(null===d.intersection(e))return[new c(d)];b=[];var f=d.top,g=d.height,h=d.left+d.width,i=d.top+d.height,j=e.left+e.width,k=e.top+e.height;return e.top>d.top&&(b.push(new c(d.left,d.top,d.width,e.top-d.top)),f=e.top,g-=e.top-d.top),i>k&&(b.push(new c(d.left,k,d.width,i-k)),g=k-f),e.left>d.left&&b.push(new c(d.left,f,e.left-d.left,g)),h>j&&b.push(new c(j,f,h-j,g)),b},c.prototype.toString=function(){return"[Rect left="+this.left+", top="+this.top+", width="+this.width+", height="+this.height+"]"};var d=function(a){a instanceof c||(a=new c(a)),this.rects=[a]};d.prototype.each=function(a){for(var b=0;b<this.rects.length;b++)a.call(this,this.rects[b])},d.prototype.subtract=function(a){var b=[];a instanceof c||(a=new c(a)),this.each(function(c){for(var d=c.subtract(a),e=0;e<d.length;e++)b.push(d[e])}),this.rects=b},d.prototype.toString=function(){var a="[Plane ";return this.each(function(b){a+=b.toString()+" "}),a+"]"};var e=function(){a(b).off("resize.helphud"),a(".helphud-mask,.helphud-pointer,.helphud-tooltip,.helphud-overlay").remove()},f=function(){var g={margin:3,stick:30,barrier:5},h=a("body"),i=this,j=new d(i),k=i.find("*[data-intro]");k.each(function(){j.subtract(new c(a(this)).explode(g.margin))}),j.each(function(b){var c=a("<div class='helphud-mask'></div>");c.css({left:b.left,top:b.top,width:b.width,height:b.height}),h.append(c)}),k.each(function(){var b=a(this),c=b.offset(),d=c.left-g.margin,e=c.top-g.margin,f=b.outerWidth()+2*g.margin,i=b.outerHeight()+2*g.margin,j=b.data("position")||"bottom",k=a("<div class='helphud-pointer' ></div>");switch(j){case"left":k.css({top:e,left:d-g.stick-g.barrier+"px",width:g.stick+"px",height:i}).addClass("helphud-pointer-left");break;case"right":k.css({top:e,left:d+f+g.barrier+"px",width:g.stick+"px",height:i}).addClass("helphud-pointer-right");break;case"top":k.css({top:e-g.stick-g.barrier+"px",left:d+"px",width:f+"px",height:g.stick+"px"}).addClass("helphud-pointer-top");break;default:k.css({top:e+i+g.barrier+"px",left:d+"px",width:f+"px",height:g.stick+"px"}).addClass("helphud-pointer-bottom")}h.append(k);var l=a("<div class='helphud-tooltip' style='left:-10000px'></div>");switch(l.html($e.data("intro")),h.append(l),j){case"left":l.css({top:e+i/2-l.outerHeight()/2+"px",left:d-g.barrier-g.stick-l.outerWidth()+"px"});break;case"right":l.css({top:e+i/2-l.outerHeight()/2+"px",left:d+f+g.barrier+g.stick+"px"});break;case"top":l.css({top:e-g.barrier-g.stick-l.outerHeight()+"px",left:d+f/2-l.outerWidth()/2+"px"});break;default:l.css({top:e+i+g.barrier+g.stick+"px",left:d+f/2-l.outerWidth()/2+"px"})}});var l=a("<div class='helphud-overlay'></div>");l.on("click",e),h.append(l),a(b).on("resize.helphud",function(){e(),f.apply(i)})},g={show:f,hide:e};a.fn.helphud=function(b){return g[b]?g[b].apply(this,Array.prototype.slice.call(arguments,1)):(a.error("Method "+b+" does not exist on jQuery.modalize"),void 0)}}(jQuery,window);