/*! helphud 28-07-2017 */
!function(a,b,c,d){"use strict";function e(a){var b=a.find("div.helphud-more-mask");b.length&&b.height(a.height());var c=a.find("div.helphud-more-container");c.length&&n(c)}function f(a){var b=a.data("position"),c=a.data("element"),d=c.offset(),e=d.left-k.margin,f=d.top-k.margin,g=c.outerWidth()+2*k.margin,h=c.outerHeight()+2*k.margin;switch(b){case"left":a.css({top:f+h/2-a.outerHeight()/2+"px",left:e-k.barrier-k.stick-a.outerWidth()+"px"});break;case"right":a.css({top:f+h/2-a.outerHeight()/2+"px",left:e+g+k.barrier+k.stick+"px"});break;case"top":a.css({top:f-k.barrier-k.stick-a.outerHeight()+"px",left:e+g/2-a.outerWidth()/2+"px"});break;case"center":a.css({top:f+h/2-a.outerHeight()/2+"px",left:e+g/2-a.outerWidth()/2+"px"});break;default:a.css({top:f+h+k.barrier+k.stick+"px",left:e+g/2-a.outerWidth()/2+"px"})}var i=a.data("pointer");switch(b){case"left":i.css({top:f,left:e-k.stick-k.barrier+"px",width:k.stick+"px",height:h}).addClass("helphud-pointer-left");break;case"right":i.css({top:f,left:e+g+k.barrier+"px",width:k.stick+"px",height:h}).addClass("helphud-pointer-right");break;case"top":i.css({top:f-k.stick-k.barrier+"px",left:e+"px",width:g+"px",height:k.stick+"px"}).addClass("helphud-pointer-top");break;case"center":i.remove();break;default:i.css({top:f+h+k.barrier+"px",left:e+"px",width:g+"px",height:k.stick+"px"}).addClass("helphud-pointer-bottom")}}function g(d){d.height(Math.max(a(b).height(),a(c).height())),r(d),d.find("div.helphud-tooltip").each(function(){f(a(this))}),e(d)}var h=function(){var a,b;1==arguments.length?(b=arguments[0],b instanceof h?(this.left=b.left,this.top=b.top,this.width=b.width,this.height=b.height):(a=b.offset(),this.left=a.left,this.top=a.top,this.width=b.outerWidth(),this.height=b.outerHeight())):4==arguments.length&&(this.left=arguments[0],this.top=arguments[1],this.width=arguments[2],this.height=arguments[3])};h.prototype.explode=function(a){return this.left-=a,this.top-=a,this.width+=2*a,this.height+=2*a,this},h.prototype.intersection=function(a){var b=this,c=a,d=Math.max(b.left,c.left),e=Math.min(b.left+b.width,c.left+c.width);if(e>=d){var f=Math.max(b.top,c.top),g=Math.min(b.top+b.height,c.top+c.height);if(g>=f)return new h(d,f,e-d,g-f)}return null},h.prototype.subtract=function(a){var b,c=this,d=a;if(null===c.intersection(d))return[new h(c)];b=[];var e=c.top,f=c.height,g=c.left+c.width,i=c.top+c.height,j=d.left+d.width,k=d.top+d.height;return d.top>c.top&&(b.push(new h(c.left,c.top,c.width,d.top-c.top)),e=d.top,f-=d.top-c.top),i>k&&(b.push(new h(c.left,k,c.width,i-k)),f=k-e),d.left>c.left&&b.push(new h(c.left,e,d.left-c.left,f)),g>j&&b.push(new h(j,e,g-j,f)),b},h.prototype.toString=function(){return"[Rect left="+this.left+", top="+this.top+", width="+this.width+", height="+this.height+"]"};var i=function(a){a instanceof h||(a=new h(a)),this.rects=[a]};i.prototype.each=function(a){for(var b=0;b<this.rects.length;b++)a.call(this,this.rects[b])},i.prototype.subtract=function(a){var b=[];a instanceof h||(a=new h(a)),this.each(function(c){for(var d=c.subtract(a),e=0;e<d.length;e++)b.push(d[e])}),this.rects=b},i.prototype.toString=function(){var a="[Plane ";return this.each(function(b){a+=b.toString()+" "}),a+"]"};var j=function(a,b){var e;return function(){e&&c.clearTimeout(e),e=c.setTimeout(function(){e=d,b()},a)}},k={margin:3,stick:30,barrier:5},l=function(){var b=a(".helphud-overlay"),c=b.data("container");c.removeClass("helphud-shown").trigger(a.Event("helphud-hidden")),b.fadeOut({complete:function(){m.apply(this,arguments)}})},m=function(){a(c).off(".helphud");var b=a(".helphud-overlay");b.data("container");b.find(".helphud-panel").each(function(){var b=a(this),c=b.data("marker");b.toggle(!1),c.before(b).remove()}),b.data("more")&&p(b.data("more")),b.find(".helphud-tooltip,[data-from]").each(function(){var b=a(this),c=a(b.data("from"));b.contents().each(function(){c.append(this)})}),b.remove()},n=function(b){b.css({position:"absolute",top:Math.max(0,(a(c).height()-b.outerHeight())/2+a(c).scrollTop())+"px",left:Math.max(0,(a(c).width()-b.outerWidth())/2+a(c).scrollLeft())+"px"})},o=function(b){var c=a(".helphud-overlay");c.data("more",b);var d=a("<div class='helphud-more-mask'></div>");c.append(d),d.bind("click",p);var f=a("<div class='helphud-more-container'><div class='helphud-more-body'></div><div class='helphud-more-commands'><a class='helphud-more-close' href='#'>Close</a></div></div>"),g=f.find(".helphud-more-body"),h=a("<div class='helphud-marker'></div>"),i=a("#"+b);i.trigger(a.Event("helphud-shown")).data("marker",h).before(h).removeClass("helphud-more"),g.append(i),c.append(f),e(c)},p=function(){var b=a(".helphud-overlay"),c=a("#"+b.data("more")),d=c.data("marker");c.trigger(a.Event("helphud-hidden")),d.before(c).remove(),c.removeData("marker").addClass("helphud-more"),b.find(".helphud-more-mask").remove(),b.find(".helphud-more-container").remove(),b.removeData("more")},q=function(){var b=this;s.apply(this,arguments),a(".helphud-overlay").toggle(!1).fadeIn({complete:function(){b.addClass("helphud-shown").trigger(a.Event("helphud-shown"))}})},r=function(b){var c=b.data("elements"),d=(b.data("container"),new i(b));c.each(function(){a(this).data("highlight")!==!1&&d.subtract(new h(a(this)).explode(k.margin))}),b.find("div.helphud-mask").remove(),d.each(function(c){var d=a("<div class='helphud-mask'></div>");d.css({left:c.left,top:c.top,width:c.width,height:c.height}),b.append(d)})},s=function(){var b=a("body"),e=this,f=[];a(this).find("*[data-intro]:visible").each(function(){var b=a(this).attr("data-intro"),c='*[data-intro="'+b+'"]:visible:first';a.inArray(c,f)<0&&f.push(c)});var h=f.length>0?e.find(f.join(",")):e.find("*[data-intro]:visible"),i=a("<div class='helphud-overlay'></div>");i.data("container",e),i.data("elements",h),b.append(i),i.on("click",function(b){var c,e=a(b.target),f=e.add(e.parentsUntil(".helphud-overlay"));if(f.each(function(){return c=a(this).data("more"),c===d}),c)return o(c),void b.preventDefault();var g=!1;if(f.each(function(){return g=a(this).hasClass("helphud-more-close"),g===!1}),g)return p(),void b.preventDefault();var h=e.hasClass("helphud-ignore")||e.parents(".helphud-ignore").length>0||e.hasClass("helphud-more-container")||e.parents(".helphud-more-container").length>0||e.hasClass("helphud-more-mask");h===!1&&l()}),h.each(function(){var b=a(this),c=b.data("position")||"bottom",d=b.data("intro"),e="";d.length>0&&"#"===d.charAt(0)&&(e=" "+d.substring(1));var f=a("<div class='helphud-tooltip"+e+"' style='left:-10000px'></div>");f.data("element",b),f.data("position",c),d.length>0&&"#"===d.charAt(0)?(a(d).contents().each(function(){f.append(this)}),f.data("from",d)):f.html(b.data("intro")),i.append(f);var g=a("<div class='helphud-pointer' ></div>");i.append(g),f.data("pointer",g)}),e.find(".helphud-panel").each(function(){var b=a(this);if(b.parent().is(":visible")){var c=a("<div class='helphud-marker'></div>");a(this).data("marker",c).before(c).appendTo(i).toggle(!0)}}),g(i),a(c).on("resize.helphud",j(50,function(){g(i)})).on("scroll.helphud",j(50,function(){g(i)}))},t={show:q,hide:l};a.fn.helphud=function(b){return t[b]?t[b].apply(this,Array.prototype.slice.call(arguments,1)):void a.error("Method "+b+" does not exist on jQuery.helphud")}}(jQuery,document,window);